# Bç«™ä¾µæƒä¸¾æŠ¥åŠ©æ‰‹

ä¸€ä¸ªä¸“é—¨ä¸ºBç«™è®¾è®¡çš„æµè§ˆå™¨æ’ä»¶ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿè¯†åˆ«å’Œä¸¾æŠ¥ä¾µæƒå†…å®¹ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- **ä¸€é”®æŠ“å–ä¾µæƒä¿¡æ¯** - åœ¨Bç«™é¡µé¢è‡ªåŠ¨æŠ“å–è§†é¢‘æ ‡é¢˜ã€UPä¸»ã€é“¾æ¥ç­‰å…³é”®æ•°æ®
- **æ™ºèƒ½æ¡ˆä»¶ç®¡ç†** - åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤å’ŒæŸ¥çœ‹ä¾µæƒæ¡ˆä»¶
- **è¯æ®é“¾å…³è”** - å°†ä¾µæƒçº¿ç´¢ä¸åŸåˆ›ä½œå“é“¾æ¥å…³è”ï¼Œå½¢æˆå®Œæ•´è¯æ®é“¾
- **è‡ªåŠ¨åŒ–ä¸¾æŠ¥** - é€šè¿‡APIç›´è¿æˆ–UIè‡ªåŠ¨åŒ–å®Œæˆç¹ççš„è¡¨å•å¡«å†™å’Œæäº¤

### ğŸ› ï¸ æŠ€æœ¯ç‰¹æ€§
- **Manifest V3** - ä½¿ç”¨æœ€æ–°çš„Chromeæ‰©å±•æ ‡å‡†
- **å¤šé¡µé¢æ”¯æŒ** - æ”¯æŒè§†é¢‘é¡µé¢ã€ç”¨æˆ·é¡µé¢ã€ç•ªå‰§é¡µé¢ç­‰
- **å®æ—¶æ•°æ®ç›‘æ§** - è‡ªåŠ¨ç›‘æ§é¡µé¢å˜åŒ–ï¼Œå®æ—¶æ›´æ–°æ•°æ®
- **æ•°æ®æŒä¹…åŒ–** - æœ¬åœ°å­˜å‚¨æ¡ˆä»¶æ•°æ®å’Œè®¾ç½®
- **å¯¼å…¥å¯¼å‡º** - æ”¯æŒæ•°æ®çš„å¤‡ä»½å’Œæ¢å¤

## å®‰è£…è¯´æ˜

### å¼€å‘ç¯å¢ƒå®‰è£…

1. **å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd bilibili-report-plugin
   ```

2. **å‡†å¤‡å›¾æ ‡æ–‡ä»¶**
   - å°† `icons/icon.svg` è½¬æ¢ä¸ºä»¥ä¸‹PNGæ–‡ä»¶ï¼š
     - `icons/icon16.png` (16x16)
     - `icons/icon48.png` (48x48)
     - `icons/icon128.png` (128x128)

3. **åŠ è½½åˆ°Chrome**
   - æ‰“å¼€Chromeæµè§ˆå™¨
   - è®¿é—® `chrome://extensions/`
   - å¼€å¯"å¼€å‘è€…æ¨¡å¼"
   - ç‚¹å‡»"åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"
   - é€‰æ‹©é¡¹ç›®æ–‡ä»¶å¤¹

### ç”Ÿäº§ç¯å¢ƒå®‰è£…

1. **æ‰“åŒ…æ‰©å±•**
   ```bash
   # åœ¨Chromeæ‰©å±•ç®¡ç†é¡µé¢ç‚¹å‡»"æ‰“åŒ…æ‰©å±•ç¨‹åº"
   # é€‰æ‹©é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œç”Ÿæˆ.crxæ–‡ä»¶
   ```

2. **åˆ†å‘å®‰è£…**
   - å°†ç”Ÿæˆçš„.crxæ–‡ä»¶åˆ†å‘ç»™ç”¨æˆ·
   - ç”¨æˆ·æ‹–æ‹½åˆ°Chromeæ‰©å±•é¡µé¢å®‰è£…

## ä½¿ç”¨æŒ‡å—

### åŸºæœ¬ä½¿ç”¨æµç¨‹

1. **è®¿é—®Bç«™é¡µé¢**
   - æ‰“å¼€ä»»æ„Bç«™è§†é¢‘é¡µé¢
   - æ’ä»¶ä¼šè‡ªåŠ¨æ£€æµ‹é¡µé¢ç±»å‹

2. **æŠ“å–ä¾µæƒä¿¡æ¯**
   - ç‚¹å‡»æ’ä»¶å›¾æ ‡æ‰“å¼€å¼¹çª—
   - ç‚¹å‡»"æŠ“å–ä¾µæƒä¿¡æ¯"æŒ‰é’®
   - ç³»ç»Ÿè‡ªåŠ¨æŠ“å–é¡µé¢æ•°æ®

3. **åˆ›å»ºæ¡ˆä»¶**
   - å¡«å†™åŸåˆ›ä½œå“é“¾æ¥
   - è¯¦ç»†æè¿°ä¾µæƒæƒ…å†µ
   - ç‚¹å‡»"ä¿å­˜æ¡ˆä»¶"

4. **æäº¤ä¸¾æŠ¥**
   - åœ¨æ¡ˆä»¶ç®¡ç†é¡µé¢æŸ¥çœ‹æ¡ˆä»¶
   - ç‚¹å‡»"æäº¤ä¸¾æŠ¥"æŒ‰é’®
   - ç³»ç»Ÿè‡ªåŠ¨å®Œæˆä¸¾æŠ¥æµç¨‹

### é«˜çº§åŠŸèƒ½

#### æ¡ˆä»¶ç®¡ç†
- **æŸ¥çœ‹ç»Ÿè®¡** - æŸ¥çœ‹æ€»æ¡ˆä»¶æ•°ã€å¾…å¤„ç†ã€å·²æäº¤ç­‰ç»Ÿè®¡æ•°æ®
- **ç­›é€‰æœç´¢** - æŒ‰çŠ¶æ€ã€æ—¶é—´ã€å…³é”®è¯ç­›é€‰æ¡ˆä»¶
- **æ‰¹é‡æ“ä½œ** - æ”¯æŒæ‰¹é‡å¯¼å…¥å¯¼å‡ºæ¡ˆä»¶æ•°æ®

#### è®¾ç½®é…ç½®
- **è‡ªåŠ¨æŠ“å–** - è®¿é—®é¡µé¢æ—¶è‡ªåŠ¨æŠ“å–æ•°æ®
- **è‡ªåŠ¨æäº¤** - åˆ›å»ºæ¡ˆä»¶åè‡ªåŠ¨æäº¤ä¸¾æŠ¥
- **é€šçŸ¥æé†’** - æ“ä½œæˆåŠŸ/å¤±è´¥çš„é€šçŸ¥è®¾ç½®
- **è°ƒè¯•æ¨¡å¼** - å¯ç”¨è¯¦ç»†æ—¥å¿—å’Œè°ƒè¯•ä¿¡æ¯

#### å³é”®èœå•
- **å¿«é€ŸæŠ“å–** - å³é”®ç‚¹å‡»å…ƒç´ å¿«é€ŸæŠ“å–ä¿¡æ¯
- **å¿«é€Ÿä¸¾æŠ¥** - å³é”®èœå•ç›´æ¥å‘èµ·ä¸¾æŠ¥

## é¡¹ç›®ç»“æ„

```
bilibili-report-plugin/
â”œâ”€â”€ manifest.json              # æ‰©å±•æ¸…å•æ–‡ä»¶
â”œâ”€â”€ icons/                     # å›¾æ ‡æ–‡ä»¶
â”‚   â”œâ”€â”€ icon16.png
â”‚   â”œâ”€â”€ icon48.png
â”‚   â”œâ”€â”€ icon128.png
â”‚   â””â”€â”€ icon.svg
â”œâ”€â”€ popup/                     # å¼¹çª—ç•Œé¢
â”‚   â”œâ”€â”€ popup.html
â”‚   â”œâ”€â”€ popup.css
â”‚   â””â”€â”€ popup.js
â”œâ”€â”€ content_scripts/           # å†…å®¹è„šæœ¬
â”‚   â”œâ”€â”€ injector.js           # é€šç”¨æ³¨å…¥é€»è¾‘
â”‚   â”œâ”€â”€ bilibili_scraper.js   # Bç«™æ•°æ®æŠ“å–
â”‚   â””â”€â”€ injector.css          # æ³¨å…¥æ ·å¼
â”œâ”€â”€ background/                # åå°è„šæœ¬
â”‚   â””â”€â”€ service-worker.js     # Service Worker
â”œâ”€â”€ pages/                     # ç‹¬ç«‹é¡µé¢
â”‚   â”œâ”€â”€ dashboard.html        # æ¡ˆä»¶ç®¡ç†é¡µé¢
â”‚   â”œâ”€â”€ dashboard.css
â”‚   â”œâ”€â”€ dashboard.js
â”‚   â””â”€â”€ settings.html         # è®¾ç½®é¡µé¢
â””â”€â”€ utils/                     # å·¥å…·å‡½æ•°
    â”œâ”€â”€ storage.js            # å­˜å‚¨ç®¡ç†
    â””â”€â”€ api.js               # APIé€šä¿¡
```

## æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæŠ€æœ¯
- **Manifest V3** - Chromeæ‰©å±•æœ€æ–°æ ‡å‡†
- **JavaScript ES6+** - ç°ä»£JavaScriptè¯­æ³•
- **Chrome Extensions API** - æµè§ˆå™¨æ‰©å±•API
- **Service Worker** - åå°æœåŠ¡å·¥ä½œçº¿ç¨‹

### æ ·å¼æŠ€æœ¯
- **CSS3** - ç°ä»£CSSç‰¹æ€§
- **Flexbox/Grid** - å“åº”å¼å¸ƒå±€
- **CSSåŠ¨ç”»** - æµç•…çš„äº¤äº’æ•ˆæœ

### æ•°æ®å­˜å‚¨
- **Chrome Storage API** - æœ¬åœ°æ•°æ®å­˜å‚¨
- **IndexedDB** - å¤§æ•°æ®å­˜å‚¨ï¼ˆå¯é€‰ï¼‰
- **Cookies** - ç”¨æˆ·ä¼šè¯ç®¡ç†

## APIæ–‡æ¡£

### å†…å®¹è„šæœ¬API

#### æ•°æ®æŠ“å–
```javascript
// æŠ“å–é¡µé¢æ•°æ®
chrome.runtime.sendMessage({
    action: 'captureData',
    options: { includeScreenshot: true }
}, (response) => {
    if (response.success) {
        console.log('æŠ“å–çš„æ•°æ®:', response.data);
    }
});
```

#### æ¡ˆä»¶ç®¡ç†
```javascript
// åˆ›å»ºæ¡ˆä»¶
chrome.runtime.sendMessage({
    action: 'createCase',
    caseData: {
        infringedContent: {...},
        originalWork: 'https://example.com/original',
        evidenceDesc: 'ä¾µæƒæè¿°...'
    }
}, (response) => {
    if (response.success) {
        console.log('æ¡ˆä»¶ID:', response.caseId);
    }
});
```

### åå°è„šæœ¬API

#### å­˜å‚¨æ“ä½œ
```javascript
// è·å–æ¡ˆä»¶æ•°æ®
const cases = await storageManager.getCases();

// ä¿å­˜è®¾ç½®
await storageManager.saveSettings({
    autoCapture: true,
    notifications: true
});
```

#### APIè¯·æ±‚
```javascript
// æäº¤ä¸¾æŠ¥
const result = await apiManager.submitReport({
    aid: '123456',
    bvid: 'BV1234567890',
    reason: 1,
    desc: 'ä¾µæƒæè¿°...'
});
```

## é…ç½®è¯´æ˜

### é»˜è®¤è®¾ç½®
```javascript
{
    autoCapture: true,        // è‡ªåŠ¨æŠ“å–
    autoSubmit: false,       // è‡ªåŠ¨æäº¤
    notifications: true,     // é€šçŸ¥æé†’
    debugMode: false,        // è°ƒè¯•æ¨¡å¼
    apiTimeout: 30000,       // APIè¶…æ—¶æ—¶é—´
    maxRetries: 3,          // æœ€å¤§é‡è¯•æ¬¡æ•°
    evidenceScreenshots: true, // è¯æ®æˆªå›¾
    reportTemplate: 'default', // ä¸¾æŠ¥æ¨¡æ¿
    language: 'zh-CN'       // ç•Œé¢è¯­è¨€
}
```

### è‡ªå®šä¹‰é…ç½®
å¯ä»¥é€šè¿‡è®¾ç½®é¡µé¢ä¿®æ”¹å„é¡¹é…ç½®ï¼Œæˆ–ç›´æ¥ä¿®æ”¹ `utils/storage.js` ä¸­çš„é»˜è®¤è®¾ç½®ã€‚

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„æ•°æ®æŠ“å–å™¨

1. **åˆ›å»ºæŠ“å–å™¨æ–‡ä»¶**
   ```javascript
   // content_scripts/new_scraper.js
   class NewScraper {
       async extractData() {
           // å®ç°æ•°æ®æŠ“å–é€»è¾‘
       }
   }
   ```

2. **æ³¨å†ŒæŠ“å–å™¨**
   ```javascript
   // åœ¨ injector.js ä¸­æ·»åŠ 
   if (this.isNewPage()) {
       this.setupNewExtraction();
   }
   ```

3. **æ›´æ–°manifest.json**
   ```json
   {
       "content_scripts": [{
           "matches": ["https://new-site.com/*"],
           "js": ["content_scripts/new_scraper.js"]
       }]
   }
   ```

### æ·»åŠ æ–°çš„APIç«¯ç‚¹

1. **å®šä¹‰APIæ–¹æ³•**
   ```javascript
   // utils/api.js
   async newApiMethod(params) {
       return await this.request({
           url: '/new/endpoint',
           method: 'POST',
           body: params
       });
   }
   ```

2. **è°ƒç”¨API**
   ```javascript
   const result = await apiManager.newApiMethod({
       param1: 'value1',
       param2: 'value2'
   });
   ```

### è°ƒè¯•æŠ€å·§

1. **å¯ç”¨è°ƒè¯•æ¨¡å¼**
   - åœ¨è®¾ç½®ä¸­å¼€å¯"è°ƒè¯•æ¨¡å¼"
   - æŸ¥çœ‹æ§åˆ¶å°è¯¦ç»†æ—¥å¿—

2. **åå°è„šæœ¬è°ƒè¯•**
   ```javascript
   // åœ¨ service-worker.js ä¸­
   console.log('[Background] Debug message');
   ```

3. **å†…å®¹è„šæœ¬è°ƒè¯•**
   ```javascript
   // åœ¨å†…å®¹è„šæœ¬ä¸­
   console.log('[Content Script] Page data:', data);
   ```

## å¸¸è§é—®é¢˜

### Q: æ’ä»¶æ— æ³•åŠ è½½ï¼Ÿ
A: æ£€æŸ¥manifest.jsonæ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿æ‰€æœ‰å¿…éœ€æ–‡ä»¶éƒ½å­˜åœ¨ã€‚

### Q: æ•°æ®æŠ“å–å¤±è´¥ï¼Ÿ
A: ç¡®ä¿åœ¨Bç«™é¡µé¢ä½¿ç”¨æ’ä»¶ï¼Œæ£€æŸ¥ç½‘ç»œè¿æ¥å’Œé¡µé¢åŠ è½½çŠ¶æ€ã€‚

### Q: ä¸¾æŠ¥æäº¤å¤±è´¥ï¼Ÿ
A: æ£€æŸ¥CSRFä»¤ç‰Œæ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿ç”¨æˆ·å·²ç™»å½•Bç«™ã€‚

### Q: æ•°æ®ä¸¢å¤±ï¼Ÿ
A: å®šæœŸå¯¼å‡ºæ•°æ®å¤‡ä»½ï¼Œæ£€æŸ¥æµè§ˆå™¨å­˜å‚¨æƒé™è®¾ç½®ã€‚

## æ›´æ–°æ—¥å¿—

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒåŸºæœ¬çš„ä¾µæƒä¿¡æ¯æŠ“å–
- æ¡ˆä»¶ç®¡ç†åŠŸèƒ½
- è‡ªåŠ¨åŒ–ä¸¾æŠ¥æäº¤

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µ: [GitHub Repository]
- é—®é¢˜åé¦ˆ: [Issues]
- é‚®ç®±: [your-email@example.com]

## å…è´£å£°æ˜

æœ¬æ’ä»¶ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œä½¿ç”¨è€…åº”éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„å’Œå¹³å°è§„å®šã€‚å¼€å‘è€…ä¸å¯¹ä½¿ç”¨æœ¬æ’ä»¶äº§ç”Ÿçš„ä»»ä½•æ³•å¾‹åæœæ‰¿æ‹…è´£ä»»ã€‚