<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>案件管理 - B站侵权举报助手</title>
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <img src="../icons/icon48.png" alt="Logo" class="logo">
                <h1>案件管理</h1>
            </div>
            <nav class="nav">
                <button id="dashboardTab" class="nav-tab active">案件列表</button>
                <button id="settingsTab" class="nav-tab">设置</button>
                <button id="exportBtn" class="btn-secondary">导出数据</button>
                <button id="importBtn" class="btn-secondary">导入数据</button>
            </nav>
        </header>

        <main class="main">
            <section id="dashboardSection" class="section active">
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-icon">📁</div>
                        <div class="stat-content">
                            <div class="stat-number" id="totalCases">0</div>
                            <div class="stat-label">总案件数</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">⏳</div>
                        <div class="stat-content">
                            <div class="stat-number" id="pendingCases">0</div>
                            <div class="stat-label">待处理</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">✅</div>
                        <div class="stat-content">
                            <div class="stat-number" id="submittedCases">0</div>
                            <div class="stat-label">已提交</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">📊</div>
                        <div class="stat-content">
                            <div class="stat-number" id="successRate">0%</div>
                            <div class="stat-label">成功率</div>
                        </div>
                    </div>
                </div>

                <div class="filters">
                    <div class="filter-group">
                        <label for="statusFilter">状态筛选:</label>
                        <select id="statusFilter">
                            <option value="all">全部</option>
                            <option value="pending">待处理</option>
                            <option value="submitted">已提交</option>
                            <option value="success">成功</option>
                            <option value="failed">失败</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="dateFilter">时间筛选:</label>
                        <select id="dateFilter">
                            <option value="all">全部时间</option>
                            <option value="today">今天</option>
                            <option value="week">本周</option>
                            <option value="month">本月</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="searchInput">搜索:</label>
                        <input type="text" id="searchInput" placeholder="搜索案件...">
                    </div>
                </div>

                <div class="cases-container">
                    <div class="cases-header">
                        <h2>案件列表</h2>
                        <button id="refreshBtn" class="btn-primary">刷新</button>
                    </div>
                    <div id="casesList" class="cases-list">
                        <!-- 案件列表将在这里动态生成 -->
                    </div>
                </div>
            </section>

            <section id="settingsSection" class="section">
                <div class="settings-container">
                    <h2>插件设置</h2>
                    
                    <div class="settings-group">
                        <h3>通用设置</h3>
                        <div class="setting-item">
                            <label for="autoCapture">自动抓取:</label>
                            <input type="checkbox" id="autoCapture">
                            <span class="setting-description">访问B站页面时自动抓取侵权信息</span>
                        </div>
                        <div class="setting-item">
                            <label for="autoSubmit">自动提交:</label>
                            <input type="checkbox" id="autoSubmit">
                            <span class="setting-description">创建案件后自动提交举报</span>
                        </div>
                        <div class="setting-item">
                            <label for="notifications">通知提醒:</label>
                            <input type="checkbox" id="notifications">
                            <span class="setting-description">显示操作成功/失败通知</span>
                        </div>
                        <div class="setting-item">
                            <label for="debugMode">调试模式:</label>
                            <input type="checkbox" id="debugMode">
                            <span class="setting-description">启用调试日志和详细信息</span>
                        </div>
                    </div>

                    <div class="settings-group">
                        <h3>高级设置</h3>
                        <div class="setting-item">
                            <label for="apiTimeout">API超时时间(毫秒):</label>
                            <input type="number" id="apiTimeout" min="1000" max="120000" step="1000">
                        </div>
                        <div class="setting-item">
                            <label for="maxRetries">最大重试次数:</label>
                            <input type="number" id="maxRetries" min="1" max="10" step="1">
                        </div>
                        <div class="setting-item">
                            <label for="evidenceScreenshots">证据截图:</label>
                            <input type="checkbox" id="evidenceScreenshots">
                            <span class="setting-description">自动保存页面截图作为证据</span>
                        </div>
                        <div class="setting-item">
                            <label for="reportTemplate">举报模板:</label>
                            <select id="reportTemplate">
                                <option value="default">默认模板</option>
                                <option value="detailed">详细模板</option>
                                <option value="simple">简洁模板</option>
                                <option value="custom">自定义模板</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label for="language">界面语言:</label>
                            <select id="language">
                                <option value="zh-CN">简体中文</option>
                                <option value="zh-TW">繁体中文</option>
                                <option value="en-US">English</option>
                            </select>
                        </div>
                    </div>

                    <div class="settings-actions">
                        <button id="saveSettingsBtn" class="btn-primary">保存设置</button>
                        <button id="resetSettingsBtn" class="btn-secondary">重置默认</button>
                        <button id="clearDataBtn" class="btn-danger">清空数据</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- 案件详情模态框 -->
    <div id="caseModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>案件详情</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="case-detail-section">
                    <h4>侵权内容</h4>
                    <div class="detail-item">
                        <label>标题:</label>
                        <span id="detailTitle">-</span>
                    </div>
                    <div class="detail-item">
                        <label>UP主:</label>
                        <span id="detailUploader">-</span>
                    </div>
                    <div class="detail-item">
                        <label>链接:</label>
                        <a id="detailUrl" href="#" target="_blank">查看</a>
                    </div>
                    <div class="detail-item">
                        <label>发布时间:</label>
                        <span id="detailPublishTime">-</span>
                    </div>
                </div>

                <div class="case-detail-section">
                    <h4>原创作品</h4>
                    <div class="detail-item">
                        <label>作品链接:</label>
                        <a id="detailOriginalWork" href="#" target="_blank">查看</a>
                    </div>
                </div>

                <div class="case-detail-section">
                    <h4>侵权描述</h4>
                    <div class="detail-textarea" id="detailEvidenceDesc">-</div>
                </div>

                <div class="case-detail-section">
                    <h4>案件信息</h4>
                    <div class="detail-item">
                        <label>案件ID:</label>
                        <span id="detailCaseId">-</span>
                    </div>
                    <div class="detail-item">
                        <label>创建时间:</label>
                        <span id="detailCreatedAt">-</span>
                    </div>
                    <div class="detail-item">
                        <label>状态:</label>
                        <span id="detailStatus" class="status-badge">-</span>
                    </div>
                    <div class="detail-item" id="detailSubmittedAtContainer" style="display: none;">
                        <label>提交时间:</label>
                        <span id="detailSubmittedAt">-</span>
                    </div>
                </div>

                <div class="case-detail-section" id="detailResultSection" style="display: none;">
                    <h4>提交结果</h4>
                    <div class="detail-textarea" id="detailResult">-</div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="editCaseBtn" class="btn-secondary">编辑</button>
                <button id="submitCaseBtn" class="btn-primary">提交举报</button>
                <button id="deleteCaseBtn" class="btn-danger">删除案件</button>
            </div>
        </div>
    </div>

    <!-- 编辑案件模态框 -->
    <div id="editCaseModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>编辑案件</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="editOriginalWork">原创作品链接:</label>
                    <input type="url" id="editOriginalWork" placeholder="请输入您的原创作品链接">
                </div>
                <div class="form-group">
                    <label for="editEvidenceDesc">侵权描述:</label>
                    <textarea id="editEvidenceDesc" rows="4" placeholder="请详细描述侵权情况..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelEditBtn" class="btn-secondary">取消</button>
                <button id="saveEditBtn" class="btn-primary">保存</button>
            </div>
        </div>
    </div>

    <!-- 导入数据模态框 -->
    <div id="importModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>导入数据</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="importFile">选择文件:</label>
                    <input type="file" id="importFile" accept=".json">
                    <p class="help-text">请选择之前导出的JSON文件</p>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelImportBtn" class="btn-secondary">取消</button>
                <button id="confirmImportBtn" class="btn-primary">导入</button>
            </div>
        </div>
    </div>

    <!-- 确认对话框 -->
    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>确认操作</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <p id="confirmMessage">确定要执行此操作吗？</p>
            </div>
            <div class="modal-footer">
                <button id="cancelConfirmBtn" class="btn-secondary">取消</button>
                <button id="confirmActionBtn" class="btn-danger">确认</button>
            </div>
        </div>
    </div>

    <script src="dashboard.js"></script>
</body>
</html>